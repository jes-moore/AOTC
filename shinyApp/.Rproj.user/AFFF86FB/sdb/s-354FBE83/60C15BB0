{
    "collab_server" : "",
    "contents" : "library(xts)\nlibrary(dygraphs)\n\nimportsGraph <- function(){\n        #con <- dbConnect(MySQL(),host=\"mysql3.gear.host\", dbname='oilimports',user=\"oilimports\",pass=\"Ar3GEuhb_g~0\")\n        #oilImports <- dbReadTable(con,name='oilimports') #Need to store this in a datawarehouse\n        oilImports <- read.csv('data/oilimports.csv',row.names = 1)\n        oilImports[,1] <- as.Date(oilImports[,1])\n        oilImports[,2] <- as.integer(oilImports[,2])\n        oilImports[,3] <- as.integer(oilImports[,3])\n        oilImports <- xts(oilImports[,-1],order.by=oilImports[,1])\n        \n        dyCrosshair <- function(dygraph, direction = c(\"both\", \"horizontal\", \"vertical\")) {\n                dyPlugin(\n                        dygraph = dygraph,\n                        name = \"Crosshair\",\n                        path = system.file(\"plugins/crosshair.js\", package = \"dygraphs\"),\n                        options = list(direction = match.arg(direction))\n                )\n        }\n        \n        importsGraph <- dygraph(oilImports,group = 'oil',\n                       main = \"\", ylab = \"000's Of Barrels\") %>%\n                dySeries(\"Weekly_US_Net_Imports_000s\",strokeWidth = 2, label = \"Net Imports\",color = \"#57B8FF\") %>%\n                dySeries(\"Weekly_US_Total_Imports_000s\",strokeWidth = 2, label = \"Total Imports\",color = \"#FE5D26\") %>%\n                dyRangeSelector(height = 15,dateWindow = c(range(index(oilImports))[2] - 180,range(index(oilImports))[2])) %>%\n                dyAxis(\"x\",drawGrid = FALSE) %>%\n                #dyAxis(\"y2\", label = \"Crude Price\", independentTicks = FALSE) %>%\n                dyAxis(\"y\",drawGrid = FALSE,\n                       valueFormatter = 'function(d){return d.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \",\");}',\n                       axisLabelFormatter = 'function(d){return d.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \",\");}') %>%\n                dyCrosshair(direction = \"vertical\") %>%\n                dyCSS(\"css/COTC.css\") %>%\n                dyLegend(show = \"always\",width = 600) %>%\n                dyShading(from = range(index(oilImports))[1], to = range(index(oilImports))[2], color = \"rgba(190,167,123,0.1)\")\n        \n        return(importsGraph)\n}\n\nsupplyGraph <- function(){\n        #con <- dbConnect(MySQL(),host=\"mysql3.gear.host\", dbname='oilimports',user=\"oilimports\",pass=\"Ar3GEuhb_g~0\")\n        #oilSupply <- dbReadTable(con,name='oilsupply') #Need to store this in a datawarehouse\n        oilSupply <-read.csv('data/oilsupply.csv',row.names = 1)\n        oilSupply[,1] <- as.Date(oilSupply[,1])\n        oilSupply[,2] <- as.integer(oilSupply[,2])\n        oilSupply <- xts(oilSupply[,-1],order.by=oilSupply[,1])\n        \n        dyCrosshair <- function(dygraph, direction = c(\"both\", \"horizontal\", \"vertical\")) {\n                dyPlugin(\n                        dygraph = dygraph,\n                        name = \"Crosshair\",\n                        path = system.file(\"plugins/crosshair.js\", package = \"dygraphs\"),\n                        options = list(direction = match.arg(direction))\n                )\n        }\n        \n        supplyGraph <- dygraph(oilSupply,group = 'oil',\n                               main = \"\", ylab = \"000's Of Barrels\") %>%\n                dySeries(\"V1\",strokeWidth = 2, label = \"US Crude Production\",color = \"#57B8FF\") %>%\n                dyRangeSelector(height = 15,dateWindow = c(range(index(oilSupply))[2] - 180,range(index(oilSupply))[2])) %>%\n                dyAxis(\"x\",drawGrid = FALSE) %>%\n                #dyAxis(\"y2\", label = \"Crude Price\", independentTicks = FALSE) %>%\n                dyAxis(\"y\",drawGrid = FALSE,\n                       valueFormatter = 'function(d){return d.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \",\");}',\n                       axisLabelFormatter = 'function(d){return d.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \",\");}') %>%\n                dyCrosshair(direction = \"vertical\") %>%\n                dyCSS(\"css/COTC.css\") %>%\n                dyLegend(show = \"always\",width = 600) %>%\n                dyShading(from = range(index(oilSupply))[1], to = range(index(oilSupply))[2], color = \"rgba(190,167,123,0.1)\")\n        \n        return(supplyGraph)\n}\n\nimportsAvgGraph <- function(){\n        #con <- dbConnect(MySQL(),host=\"mysql3.gear.host\", dbname='oilimports',user=\"oilimports\",pass=\"Ar3GEuhb_g~0\")\n        #oilImportsAvg <- dbReadTable(con,name='oilimportsavg') #Need to store this in a datawarehouse\n        oilImportsAvg <- read.csv('data/oilimportsavg.csv',row.names = 1)\n        oilImportsAvg[,1] <- as.Date(oilImportsAvg[,1])\n        oilImportsAvg[,2] <- as.integer(oilImportsAvg[,2])\n        oilImportsAvg[,3] <- as.integer(oilImportsAvg[,3])\n        oilImportsAvg <- xts(oilImportsAvg[,-1],order.by=oilImportsAvg[,1])\n        \n        dyCrosshair <- function(dygraph, direction = c(\"both\", \"horizontal\", \"vertical\")) {\n                dyPlugin(\n                        dygraph = dygraph,\n                        name = \"Crosshair\",\n                        path = system.file(\"plugins/crosshair.js\", package = \"dygraphs\"),\n                        options = list(direction = match.arg(direction))\n                )\n        }\n        \n        importsAvgGraph <- dygraph(oilImportsAvg,group = 'oil',\n                                main = \"\", ylab = \"000's Of Barrels\") %>%\n                dySeries(\"X4WkAvg_US_Net_Imports_000s\",strokeWidth = 2, label = \"4Wk Avg Net Imports\",color = \"#57B8FF\") %>%\n                dySeries(\"X4WkAvg_US_Total_Imports_000s\",strokeWidth = 2, label = \"4Wk Avg Total Imports\",color = \"#FE5D26\") %>%\n                dyRangeSelector(height = 15,dateWindow = c(range(index(oilImportsAvg))[2] - 180,range(index(oilImportsAvg))[2])) %>%\n                dyAxis(\"x\",drawGrid = FALSE) %>%\n                #dyAxis(\"y2\", label = \"Crude Price\", independentTicks = FALSE) %>%\n                dyAxis(\"y\",drawGrid = FALSE,\n                       valueFormatter = 'function(d){return d.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \",\");}',\n                       axisLabelFormatter = 'function(d){return d.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \",\");}') %>%\n                dyCrosshair(direction = \"vertical\") %>%\n                dyCSS(\"css/COTC.css\") %>%\n                dyLegend(show = \"always\",width = 600) %>%\n                dyShading(from = range(index(oilImportsAvg))[1], to = range(index(oilImportsAvg))[2], color = \"rgba(190,167,123,0.1)\")\n       \n        return(importsAvgGraph)\n}\n\noilStocks <- function(){\n        #con <- dbConnect(MySQL(),host=\"mysql3.gear.host\", dbname='oilimports',user=\"oilimports\",pass=\"Ar3GEuhb_g~0\")\n        #oilStocks <- dbReadTable(con,name='oilstocks') #Need to store this in a datawarehouse\n        oilStocks <- read.csv('data/oilstocks.csv',row.names = 1)\n        oilStocks[,1] <- as.Date(oilStocks[,1])\n        oilStocks[,2] <- as.integer(oilStocks[,2])\n        oilStocks <- xts(oilStocks[,-1],order.by=oilStocks[,1])\n        \n        dyCrosshair <- function(dygraph, direction = c(\"both\", \"horizontal\", \"vertical\")) {\n                dyPlugin(\n                        dygraph = dygraph,\n                        name = \"Crosshair\",\n                        path = system.file(\"plugins/crosshair.js\", package = \"dygraphs\"),\n                        options = list(direction = match.arg(direction))\n                )\n        }\n        \n        oilStocks <- dygraph(oilStocks,group = 'oil',\n                                   main = \"\", ylab = \"000's Of Barrels\") %>%\n                dySeries(\"V1\",strokeWidth = 2, label = \"Weekly Ending Crude Stocks 000s\",color = \"#57B8FF\") %>%\n                dyRangeSelector(height = 15,dateWindow = c(range(index(oilStocks))[2] - 180,range(index(oilStocks))[2])) %>%\n                dyAxis(\"x\",drawGrid = FALSE) %>%\n                #dyAxis(\"y2\", label = \"Crude Price\", independentTicks = FALSE) %>%\n                dyAxis(\"y\",drawGrid = FALSE,\n                       valueFormatter = 'function(d){return d.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \",\");}',\n                       axisLabelFormatter = 'function(d){return d.toString().replace(/\\\\B(?=(\\\\d{3})+(?!\\\\d))/g, \",\");}') %>%\n                dyCrosshair(direction = \"vertical\") %>%\n                dyCSS(\"css/COTC.css\") %>%\n                dyLegend(show = \"always\",width = 600) %>%\n                dyShading(from = range(index(oilStocks))[1], to = range(index(oilStocks))[2], color = \"rgba(190,167,123,0.1)\")\n        return(oilStocks)\n}\n\n\n\n",
    "created" : 1496128114701.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "238810389",
    "id" : "60C15BB0",
    "lastKnownWriteTime" : 1496144561,
    "last_content_update" : 1496144561302,
    "path" : "~/Desktop/AheadOfTheCurve/shinyApp/USCrudeGraphs.R",
    "project_path" : "USCrudeGraphs.R",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}